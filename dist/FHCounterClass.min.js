/*
 * FHCounterClass by Forest Hoffman, 2016
 *
 * Version: 1.0.9
 *
 * Renders arcs using the 2D canvas renderer in most browsers.
 * 
 * To use, create a block of html using the following format:
 *
 * 		<div id='canvas_wrapper' class='wrapper'>
 *			<canvas id='my_canvas' width='200' height='200'></canvas>
 *			<div id='canvas_content'><span id='year'>2</span> <span id='year_suffix'>yr</span></div>
 *		</div>
 *
 * Then initizalize the class, configure the counter (optional), and draw the counter with some JS.
 *
 *		var FHCounter = new FHCounterClass( 'my_canvas' );
 *		// put any customizations in this object argument or run with the default settings
 *		FHCounter.set_arc_properties({
 *			'stroke_color': 'green'
 * 		});
 * 		FHCounter.draw_arc();
 *		
 * Customizable Arc properties include:
 *		stroke_width,
 *		stroke_color,
 * 		bg_stroke, 		
 * 		bg_stroke_color,
 *		start_year,
 *		year,
 *		year_text,
 *		year_suffix,
 *		x,
 *		y,
 *		radius,
 *		initial_angle,
 *		final_angle,
 *		anti_clockwise,
 *		anim_speed
 *
 */
function FHCounterClass(a){if(this._CANVAS=document.getElementById(a),null===this._CANVAS)throw new Error("FHCounterClass: The canvas was null.");this.CTX=this._CANVAS.getContext("2d"),this.FRAMES=0,this.ARC={},this._START_YEAR=new Date(2012,8,2),this._MS_IN_YEAR=31536e6,this.MAX_YEARS=this._get_max_years(this._START_YEAR)}FHCounterClass.prototype.clear_canvas=function(){var a=this._CANVAS.width,b=this._CANVAS.height;this.CTX.clearRect(0,0,a,b)},FHCounterClass.prototype._set_start_year=function(a){"undefined"!=typeof a&&(this._START_YEAR=a,this.MAX_YEARS=this._get_max_years(this._START_YEAR))},FHCounterClass.prototype._get_max_years=function(a){"undefined"==typeof a&&(a=this._START_DATE_DEFAULT);var b=this._get_year_diff(a);return b},FHCounterClass.prototype._get_year_diff=function(a){var b=new Date;"undefined"==typeof a&&(a=this._START_YEAR);var c=b-a,d=c/this._MS_IN_YEAR;return d},FHCounterClass.prototype._get_year_text=function(a){var b="",c=1,d=this._get_year_diff(a),e=Math.ceil(d);c=d>100?3:d>10?2:1;var f=d.toPrecision(c),g=Math.abs(d-e);return 1>d?b="< 1":0===g?b=f:g>0&&(b="~ "+f),b},FHCounterClass.prototype._get_year_radians=function(a){var b=this._get_year_diff(a),c=b/this.MAX_YEARS,d=c*(2*Math.PI);return d},FHCounterClass.prototype.set_arc_properties=function(a){var b={stroke_width:10,stroke_color:"#fde244",bg_stroke:!0,bg_stroke_color:"#222222",start_year:this._START_YEAR,year:this._START_YEAR,year_text:void 0,year_suffix:"yr",x:this._CANVAS.width/2,y:this._CANVAS.height/2,radius:this._CANVAS.width/2-10,initial_angle:0,final_angle:void 0,anti_clockwise:!0,anim_speed:30},c=Object.keys(b),d="",e=0;if(0===Object.keys(this.ARC).length)for(var f=0;f<c.length;f++){switch(d=c[f],e="undefined"!=typeof a&&"undefined"!=typeof a[d]?a[d]:b[d],d){case"start_year":this._set_start_year(e);break;case"year_text":"undefined"==typeof e&&(e=this._get_year_text(this.ARC.year));break;case"final_angle":"undefined"==typeof e&&(e=this._get_year_radians(this.ARC.year))}this.ARC[d]=e}else if("undefined"!=typeof a)for(var g=Object.keys(a),h=0;h<a.length;h++)if(d=g[h],e=a[d],"undefined"!=typeof e){switch(d){case"start_year":this._set_start_year(e);break;case"year_text":e=this._get_year_text(this.ARC.year);break;case"final_angle":e=this._get_year_radians(this.ARC.year);break;case"bg_stroke":"boolean"!=typeof e&&(e=!0)}this.ARC[d]=e}},FHCounterClass.prototype.draw_arc=function(){var a,b,c,d,e;if(0===this.FRAMES){0===Object.keys(this.ARC).length&&this.set_arc_properties();var f=jQuery(this._CANVAS).siblings("#canvas_content")[0];jQuery(f).children("#year").text(this.ARC.year_text),jQuery(f).children("#year_suffix").text(this.ARC.year_suffix),jQuery(f).css({left:this._CANVAS.width/2-f.clientWidth/2,top:this._CANVAS.height/2-f.clientHeight/2})}this.clear_canvas(),e=this.FRAMES/this.ARC.anim_speed*Math.PI,a=this.ARC.initial_angle,b=this.ARC.final_angle,c=e+a,d=this.ARC.anti_clockwise?-1:1,this.ARC.bg_stroke&&(this.CTX.lineWidth=this.ARC.stroke_width,this.CTX.strokeStyle=this.ARC.bg_stroke_color,this.CTX.beginPath(),this.CTX.arc(this.ARC.x,this.ARC.y,this.ARC.radius,0,2*Math.PI,this.ARC.anti_clockwise),this.CTX.stroke()),this.CTX.lineWidth=this.ARC.stroke_width,this.CTX.strokeStyle=this.ARC.stroke_color,this.CTX.beginPath(),this.CTX.arc(this.ARC.x,this.ARC.y,this.ARC.radius,d*a,d*c,this.ARC.anti_clockwise),this.CTX.stroke(),b>c&&(this.FRAMES++,window.requestAnimationFrame(this.draw_arc.bind(this)))};
//# sourceMappingURL=FHCounterClass.min.js.map